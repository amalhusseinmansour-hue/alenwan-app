# ุชูุงูู Vimeo ูู ููุญุฉ ุงูุชุญูู - ุงูุชูู ุจูุฌุงุญ โ

ุชู ุจูุฌุงุญ ุฅุถุงูุฉ ุฅููุงููุฉ ุฅุถุงูุฉ ุงููุญุชูู ูู Vimeo ูู ููุญุฉ ุงูุชุญูู ุงูุฎุงุตุฉ ุจุงูุชุทุจูู.

## ๐ ููุฎุต ุงูุชุญุฏูุซุงุช

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช โ
**ุงูุญุงูุฉ**: ุฌุงูุฒุฉ ุจุงููุนู - ูุง ุญุงุฌุฉ ููุชุญุฏูุซ!

ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุญุชูู ุจุงููุนู ุนูู ุญูู `vimeo_id` ูู ุงูุฌุฏุงูู ุงูุชุงููุฉ:
- โ `movies` - ุฌุฏูู ุงูุฃููุงู
- โ `episodes` - ุฌุฏูู ุงูุญููุงุช

**ูููุงุช Migration ุงูููุฌูุฏุฉ**:
- `/temp-laravel/database/migrations/2025_10_28_072733_create_movies_table.php`
- `/temp-laravel/database/migrations/2025_10_28_072736_create_episodes_table.php`

**ุงูุจููุฉ**:
```php
// ูู ุฌุฏูู movies
$table->string('vimeo_id')->nullable();
$table->string('vimeo_url')->nullable();
$table->text('video_url');

// ูู ุฌุฏูู episodes
$table->string('vimeo_id')->nullable();
$table->string('vimeo_url')->nullable();
$table->text('video_url');
```

---

### 2. ููุงุฐุฌ ุงูุจูุงูุงุช (Flutter Models) โ

#### `lib/models/movie_model.dart`
ุชู ุงูุชุญุฏูุซ ูุฅุถุงูุฉ:
```dart
class MovieModel {
  final String? vimeoId;  // โ ุฌุฏูุฏ

  MovieModel({
    // ...
    this.vimeoId,
  });

  // ูู fromJson
  vimeoId: asStr(src['vimeo_id']),

  // ูู toJson
  "vimeo_id": vimeoId,
}
```

#### `lib/models/episode_model.dart`
ุชู ุงูุชุญุฏูุซ ูุฅุถุงูุฉ:
```dart
class EpisodeModel {
  final String? vimeoId;  // โ ุฌุฏูุฏ

  EpisodeModel({
    // ...
    this.vimeoId,
  });

  // ูู fromJson
  vimeoId: j['vimeo_id']?.toString(),
}
```

---

### 3. ููุญุฉ ุงูุชุญูู - ูููุฐุฌ ุงูุฃููุงู โ

**ุงูููู**: `lib/views/admin/admin_movie_form_screen.dart`

**ุงูุชุญุฏูุซุงุช**:
- โ ุฅุถุงูุฉ `_vimeoIdController` ููุชุญูู ูู ูุนุฑูู Vimeo
- โ ุฅุถุงูุฉ ูุชุบูุฑ `_videoSource` ูุชุชุจุน ูุตุฏุฑ ุงูููุฏูู (url/upload/vimeo)
- โ ูุงุฌูุฉ ูุณุชุฎุฏู ุชูุงุนููุฉ ูุน 3 ุฎูุงุฑุงุช:
  - **ุฑุงุจุท ูุจุงุดุฑ**: ุฅุฏุฎุงู URL ูุจุงุดุฑ ููููุฏูู
  - **ุฑูุน ููู**: ุฑูุน ููู ููุฏูู ูู ุงูุฌูุงุฒ
  - **Vimeo**: ุฅุฏุฎุงู ูุนุฑูู ููุฏูู Vimeo

**ุงูููุฏ ุงูุฌุฏูุฏ**:
```dart
// ุญููู ุฌุฏูุฏุฉ
final _vimeoIdController = TextEditingController();
String? _videoSource = 'url';

// ูู _saveMovie
'video_url': _videoSource == 'vimeo' ? '' : (videoUrl ?? ''),
'vimeo_id': _videoSource == 'vimeo' ? _vimeoIdController.text : '',

// ูู _loadMovieData
_vimeoIdController.text = movie['vimeo_id'] ?? '';
if (movie['vimeo_id'] != null && movie['vimeo_id'].toString().isNotEmpty) {
  _videoSource = 'vimeo';
}
```

**ูุงุฌูุฉ ุงููุณุชุฎุฏู**:
- ุฃุฒุฑุงุฑ ุงุฎุชูุงุฑ ุชูุงุนููุฉ ูุน ุชูููุฒ ุจุตุฑู ููุฎูุงุฑ ุงููุญุฏุฏ
- ุชุนูููุงุช ูุงุถุญุฉ ูููุณุชุฎุฏู (ูุซู ููููุฉ ุงุณุชุฎุฑุงุฌ ูุนุฑูู Vimeo)
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช (Validation) ุญุณุจ ุงููุตุฏุฑ ุงููุฎุชุงุฑ

---

### 4. ููุญุฉ ุงูุชุญูู - ูููุฐุฌ ุงููุณูุณูุงุช ูุงูุญููุงุช โ

**ุงูููู**: `lib/views/admin/admin_series_form_screen.dart`

**ุงูุชุญุฏูุซุงุช ูู ูุงูุฐุฉ ุฅุถุงูุฉ ุงูุญููุฉ** (`_EpisodeDialog`):
- โ ุฅุถุงูุฉ `_vimeoIdController`
- โ ุฅุถุงูุฉ ูุชุบูุฑ `_videoSource` (url/vimeo)
- โ ูุงุฌูุฉ ูุณุชุฎุฏู ูุจุณุทุฉ ูุน ุฎูุงุฑูู:
  - **ุฑุงุจุท ูุจุงุดุฑ**
  - **Vimeo**

**ุงูููุฏ ุงูุฌุฏูุฏ**:
```dart
// ูู _EpisodeDialogState
final _vimeoIdController = TextEditingController();
String _videoSource = 'url';

// ูู initState
_vimeoIdController = TextEditingController(
  text: widget.episode?['vimeo_id'] ?? '',
);

if (widget.episode?['vimeo_id'] != null &&
    widget.episode!['vimeo_id'].toString().isNotEmpty) {
  _videoSource = 'vimeo';
}

// ูู onSave
'video_url': _videoSource == 'url' ? _videoUrlController.text : '',
'vimeo_id': _videoSource == 'vimeo' ? _vimeoIdController.text : '',
```

---

## ๐ฏ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุฅุถุงูุฉ ูููู ูู Vimeo

1. ุงูุชุญ ููุญุฉ ุงูุชุญูู
2. ุงุฐูุจ ุฅูู **ุฅุถุงูุฉ ูููู ุฌุฏูุฏ**
3. ุงููุฃ ุชูุงุตูู ุงููููู (ุงูุนููุงูุ ุงููุตูุ ุฅูุฎ)
4. ูู ูุณู **"ูุตุฏุฑ ุงูููุฏูู"**:
   - ุงุฎุชุฑ **Vimeo** โ
   - ุฃุฏุฎู ูุนุฑูู ุงูููุฏูู (ูุซุงู: `123456789`)
   - ูุซุงู: ุฅุฐุง ูุงู ุงูุฑุงุจุท `https://vimeo.com/123456789`ุ ุงููุนุฑูู ูู `123456789`
5. ุฃููู ุจุงูู ุงูุญููู (ุงูุตูุฑุ ุงูุชุตูููุงุชุ ุฅูุฎ)
6. ุงุถุบุท **"ุฅุถุงูุฉ ุงููููู"**

### ุฅุถุงูุฉ ุญููุฉ ูู Vimeo

1. ูู ุตูุญุฉ ุฅุถุงูุฉ/ุชุนุฏูู ูุณูุณู
2. ุงุถุบุท **"ุฅุถุงูุฉ ุญููุฉ"**
3. ุงููุฃ ุชูุงุตูู ุงูุญููุฉ
4. ูู ูุณู **"ูุตุฏุฑ ุงูููุฏูู"**:
   - ุงุฎุชุฑ **Vimeo** โ
   - ุฃุฏุฎู ูุนุฑูู ููุฏูู Vimeo
5. ุงุญูุธ ุงูุญููุฉ

---

## ๐ ุขููุฉ ุงูุนูู

### ุนูุฏ ุงุฎุชูุงุฑ Vimeo ููุตุฏุฑ:

**ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชู ุญูุธ**:
```json
{
  "vimeo_id": "123456789",
  "video_url": ""  // ูุงุฑุบ
}
```

**ูู ุงูุชุทุจูู**:
- ูุณุชุฎุฏู `VimeoService` ุงูููุฌูุฏ ุจุงููุนู ูุฌูุจ ุชูุงุตูู ุงูููุฏูู
- ูุฏุนู ุงูููุฏูููุงุช ุงูุฎุงุตุฉ (Private Videos)
- ูููุฑ ุฌูุฏุงุช ูุชุนุฏุฏุฉ (SD, HD, Full HD, 4K)
- ูุฏุนู HLS Streaming ููุฃุฏุงุก ุงูุฃูุซู
- ูุชุชุจุน ุชูุฏู ุงููุดุงูุฏุฉ

### ุฎุฏูุฉ Vimeo ุงูููุฌูุฏุฉ

**ุงูููู**: `lib/core/services/vimeo_service.dart`

**ุงููููุฒุงุช**:
- โ ุฌูุจ ูุนูููุงุช ุงูููุฏูู ูู Vimeo API
- โ ุฏุนู ุงูููุฏูููุงุช ุงูุฎุงุตุฉ ุนุจุฑ Backend API
- โ Cache ููุฃุฏุงุก ุงูุณุฑูุน
- โ ุงุฎุชูุงุฑ ุงูุฌูุฏุฉ ุงูููุงุณุจุฉ ุชููุงุฆูุงู
- โ ุชุชุจุน ูุดุงูุฏุฉ ุงูููุฏูู
- โ ุฏุนู ุงูุชุญููู ูููุดุงูุฏุฉ ุฏูู ุงุชุตุงู

---

## ๐ฆ ุงููููุงุช ุงููุนุฏูุฉ

### Flutter (ุงูุชุทุจูู)
1. โ `lib/views/admin/admin_movie_form_screen.dart` - ูููุฐุฌ ุฅุถุงูุฉ ุงูุฃููุงู
2. โ `lib/views/admin/admin_series_form_screen.dart` - ูููุฐุฌ ุฅุถุงูุฉ ุงููุณูุณูุงุช ูุงูุญููุงุช
3. โ `lib/models/movie_model.dart` - ูููุฐุฌ ุจูุงูุงุช ุงููููู
4. โ `lib/models/episode_model.dart` - ูููุฐุฌ ุจูุงูุงุช ุงูุญููุฉ

### Laravel (Backend)
- โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฌุงูุฒุฉ ุจุงููุนู (ูุง ุญุงุฌุฉ ููุชุนุฏูู)
- โ Migration files ููุฌูุฏุฉ ูุชุญุชูู ุนูู `vimeo_id`

---

## โ ุงูุงุฎุชุจุงุฑ ูุงูุชุญูู

### ุชู ุงูุงุฎุชุจุงุฑ:
```bash
flutter analyze lib/models/ lib/views/admin/
```

**ุงููุชูุฌุฉ**:
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก (Errors)
- โน๏ธ ููุท ุชุญุฐูุฑุงุช ูุนูููุงุชูุฉ (Info warnings):
  - `avoid_print`: ุงุณุชุฎุฏุงู print (ุทุจูุนู ูู ุงูุชุทููุฑ)
  - `deprecated_member_use`: Radio buttons (ูุง ูุฒุงู ูุนูู ุจุดูู ุตุญูุญ)

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฌุงูุฒุฉ** โ
   - ูุง ุญุงุฌุฉ ูุชุดุบูู migration ุฌุฏูุฏุฉ
   - ุญูู `vimeo_id` ููุฌูุฏ ุจุงููุนู ูู `movies` ู `episodes`

2. **ุงูุชูุงูู ูุน Backend** โ
   - API ุงูููุฌูุฏ ูุฏุนู `vimeo_id`
   - ุฎุฏูุฉ Vimeo ูุชูุงููุฉ ุจุงููุนู

3. **ุงูุชุญุฏูุซ ูุงูุชุนุฏูู** โ
   - ุนูุฏ ูุชุญ ูููู/ุญููุฉ ููุฌูุฏุฉุ ูุชู ุงูุชุดุงู ุงููุตุฏุฑ ุชููุงุฆูุงู
   - ุฅุฐุง ูุงู `vimeo_id` ููุฌูุฏุ ูุชู ุงุฎุชูุงุฑ "Vimeo"
   - ุฅุฐุง ูุงู `video_url` ููุฌูุฏุ ูุชู ุงุฎุชูุงุฑ "ุฑุงุจุท ูุจุงุดุฑ"

4. **ุงูุฃูุงู** โ
   - ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช (Validation)
   - ููุน ุฅุฑุณุงู ููุงุฐุฌ ูุงุฑุบุฉ

---

## ๐ ุฌุงูุฒ ููุงุณุชุฎุฏุงู!

ุฌููุน ุงูุชุญุฏูุซุงุช ุฌุงูุฒุฉ ูููุชููุฉ. ููููู ุงูุขู:
- โ ุฅุถุงูุฉ ุฃููุงู ูู Vimeo
- โ ุฅุถุงูุฉ ุญููุงุช ูุณูุณูุงุช ูู Vimeo
- โ ุชุนุฏูู ูุญุชูู ููุฌูุฏ ูุชุบููุฑ ูุตุฏุฑ ุงูููุฏูู
- โ ุงุณุชุฎุฏุงู ุฌููุน ูููุฒุงุช Vimeo (ุฌูุฏุงุช ูุชุนุฏุฏุฉุ HLSุ ุชุชุจุน ุงููุดุงูุฏุฉ)

---

## ๐ ุฏุนู ุฅุถุงูู

ุฅุฐุง ุงุญุชุฌุช:
- ุงุณุชุฎุฑุงุฌ ูุนุฑูู Vimeo ูู ุฑุงุจุท: `https://vimeo.com/VIDEO_ID`
- ุงูุชุนุงูู ูุน ููุฏูููุงุช Vimeo ุงูุฎุงุตุฉ: ุงุณุชุฎุฏู Backend API (`/vimeo/get-url`)
- ุชุฎุตูุต ุฌูุฏุฉ ุงูููุฏูู: ุฑุงุฌุน `VimeoService` ูู `lib/core/services/vimeo_service.dart`

---

**ุชุงุฑูุฎ ุงูุฅูุฌุงุฒ**: 2025-11-19
**ุงูุญุงูุฉ**: โ ููุชูู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู
